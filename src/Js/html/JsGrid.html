<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <title>INScore Grid</title>

    <link href="../css/inscore.css" rel="stylesheet">
	<script src="../libGUIDOEngine.js"></script>
	<script src="../mainhtml.js"></script>
	<script src="inscore-code.js"></script>
</head>


<body style="margin: 20px">
	<inscore-code>
		huespan=45;		! hue span in degrees
		hue=0;			! initial hue

		&lt;? javascript
			function makemsg (msg, index, w, x, y, hue) {
				msg = msg.replace(/\?/g, index) ;
				msg = msg.replace(/width/g, w) ;
				msg = msg.replace("xpos", x) ;
				msg = msg.replace("ypos", y) ;
				return msg.replace("hue", hue) ;
			}

			function grid (size) {
				var j=1;
				var border = 0.005;
				var w = 1.9 / size - border;
				var huestep = huespan / (size * size);
				var msg = "/ITL/scene/r_? set rect width width; \
					/ITL/scene/r_? x xpos; \
					/ITL/scene/r_? y ypos; \
					/ITL/scene/r_? hsb hue 100 100;";
				var out = "";
				for (i=1; i <= size; i++) {
					x = (i-(size/2)-0.5) * (w + border);
					 for (j=1; j <= size; j++) {
						y = (j-(size/2)-0.5) * (w + border);
						index = i+"_"+j;
						out += makemsg (msg, index, w, x, y, Math.round(hue));
						hue += huestep;
					}
				}
				return out;
			}
		?&gt;

		/ITL/scene/* del;
		/ITL/scene color 0 0 0;

		&lt;?javascript grid(20); ?&gt;
	</inscore-code>

<script>
 	start();
</script>
</body>

</html>