<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>15 Gesture Follower</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,frames,index=3,info --> 
<meta name="src" content="OSCMsg.tex"> 
<meta name="date" content="2013-10-02 18:15:00"> 
<link rel="stylesheet" type="text/css" href="OSCMsg.css"> 
</head><body 
>
<!--l. 2329--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch17.html" >next</a>] [<a 
href="OSCMsgch14.html" >prev</a>] [<a 
href="OSCMsgch14.html#tailOSCMsgch14.html" >prev-tail</a>] [<a 
href="OSCMsgch14.html#tailOSCMsgch15.html">tail</a>] [<a 
href="OSCMsg3.html#OSCMsgch16.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;15</span><br /><a 
 id="x20-7800015"></a>Gesture Follower</h2>
<!--l. 2332--><p class="noindent" >INScore supports gesture following using the technology developed by the IRCAM IMTR team. These features are
available as a plugin that is included in the INScore distribution (version 1.03 or greater) or available from the
IRCAM.
<h3 class="sectionHead"><span class="titlemark">15.1    </span> <a 
 id="x20-7900015.1"></a>Basic principle</h3>
<!--l. 2338--><p class="noindent" >Gesture following is provided as a mean to interact with a score. From input viewpoint, the gesture follower is
similar to signals (see section <a 
href="OSCMsgch12.html#x16-5600012.1.1">12.1.1<!--tex4ht:ref: ssignal --></a> p.<a 
href="OSCMsgch12.html#x16-5600012.1.1">80<!--tex4ht:ref: ssignal --></a>): it accepts data stream as input both in learning and following modes. It
implements a specific set of events related to gesture following and can generate message streams parametrized
with the gesture follower current state.
<!--l. 2340--><p class="noindent" >A gesture follower is setup to handle a given count of gestures, which are actually denoted by streams of float
vectors. We&#8217;ll refer to the size of the float vector as the <span 
class="ptmri8t-">gesture dimension</span>. For example, the dimension of a gesture
captured from x, y and z accelerometers is 3.
<!--l. 2342--><p class="noindent" >A gesture follower operates in two distinct phases: a <span 
class="ptmri8t-">learning phase </span>where it actually stores the gestures data, and a
<span 
class="ptmri8t-">following phase </span>where it tries to match incoming data to the stored gestures data. When not learning nor following,
we&#8217;ll talk of an idle phase.
<!--l. 2344--><p class="noindent" >In the <span 
class="ptmri8t-">following phase</span>, the system maintains a list of likelihood for the learned gestures, a list of positions in the
gestures and a list of speeds representing how fast the gestures are made. Of course, the higher the
likelihood, the more these data are meaningfull. It&#8217;s the user responsability to decide on the meaningfull
likelihood threshold value. Interaction events are triggered only in the <span 
class="ptmri8t-">following phase </span>and for meaningfull
likelihoods.
<!--l. 2348--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.2    </span> <a 
 id="x20-8000015.2"></a>Messages</h3>
<!--l. 2349--><p class="noindent" >A gesture follower is created in a scene using the <span 
class="pcrr8tn-">imtrgf </span>type. It has a graphic appearance that may be used for
debug purpose but it is hidden by default.
<a 
 id="dx20-80001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2353--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturefollower</span> <img 
src="OSCMsg87x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx20-80002"></a>
<!--l. 2356--><p class="noindent" >The parameters are:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gesturedimension</span>: the size of the gestures data vector.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">bufsize</span>: the size of the gesture data storage.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">name</span>: a list of names to be used to refer to the learned gestures.</li></ul>
                                                                                 

                                                                                 
<!--l. 2363--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />A gesture follower is created with a fixed count of gestures that can be learned and decoded. These gestures are
named gestures and can be addressed at <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">myfollower</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">gesturename </span>where the part in italic are
user defined names and where <span 
class="pcrr8tn-">myfollower </span>is a gesture follower.
<a 
 id="dx20-80003"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2376--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturefollower</span> <img 
src="OSCMsg88x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx20-80004"></a>
<a 
 id="dx20-80005"></a>
<a 
 id="dx20-80006"></a>
<a 
 id="dx20-80007"></a>
<a 
 id="dx20-80008"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="ptmb8t-">[1] </span>input data into the gesture follower. The data are interpreted according to the current operating
     mode i.e. learning, following or idle.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[2] </span>starts to learn the gesture designated by <span 
class="ptmri8t-">name</span>. Actually records the next input data to the gesture.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[3] </span>starts following i.e. trying to match the next input data to the recorded gestures.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[4] </span>stops learning or following. Actually puts the system in idle phase.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[5] </span>clear all the gestures data. This is equivalent to send the <span 
class="pcrr8tn-">clear </span>message to all the gestures.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[6] </span>sets the size of the window that contains the history of the likelihoods. May be viewed as how fast
     the likelihoods will change.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[7] </span>sets the follower tolerance.</li></ul>
<!--l. 2393--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Creating a gesture follower for 3 dimensional data and a typical learning sequence:
                                                                                 

                                                                                 
<div class="center" 
>
<!--l. 2399--><p class="noindent" >
<div 
class="colorbox" id="colorbox80"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf set imtrgf 3 1000 gestureA gestureB gestureC gestureD</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf learn gestureA </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf 0.1 0.5 -0.2 ... 0.7; ! the data size must be a multiple of 3</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf stop;</span></div></div>
</div>
<!--l. 2403--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.3    </span> <a 
 id="x20-8100015.3"></a>Gestures management</h3>
<!--l. 2405--><p class="noindent" >Messages can also be sent to gestures i.e. to addresses in the form <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">myfollower</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">gesturename</span>
where <span 
class="pcrr8tn-">myfollower </span>is a gesture follower.
<!--l. 2407--><p class="noindent" >A gesture could be in two states:
     <ul class="itemize1">
     <li class="itemize">an active state: when its likelihood is greater or equal to the likelihood threshold.
     </li>
     <li class="itemize">an idle state: when its likelihood is lower than the likelihood threshold.</li></ul>
<a 
 id="dx20-81001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2418--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesture</span> <img 
src="OSCMsg89x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx20-81002"></a>
<a 
 id="dx20-81003"></a>
<a 
 id="dx20-81004"></a>
<a 
 id="dx20-81005"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">set</span>: sets the gesture data. This is equivalent to learn the corresponding data. The <span 
class="pcrr8tn-">set </span>message could
     be used to restored previously saved gesture data.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">clear</span>: clears the gesture data.
                                                                                 

                                                                                 
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">learn</span>: puts the gestures follower in learning mode and starts learning the corresponding gesture.
     This is equivalent to send OSClearn <span 
class="ptmri8t-">gesturename </span>to the parent gesture follower.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">likelihoodThreshold</span>: sets the gesture likelihood threshold. The parameter is a float value in the
     range <span 
class="pcrr8tn-">[0,1]</span>. Default value is <span 
class="pcrr8tn-">0.5</span>.</li></ul>
<!--l. 2432--><p class="noindent" >Gestures supports also specific queries :
<a 
 id="dx20-81006"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2435--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gestureget</span> <img 
src="OSCMsg90x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx20-81007"></a>
<a 
 id="dx20-81008"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">get</span>: without parameter, returns a set message when the gesture is not empty.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">size</span>: gives the current size of the gesture, actually the number of recorded frames.</li></ul>
<!--l. 2447--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.4    </span> <a 
 id="x20-8200015.4"></a>Events and interaction</h3>
<!--l. 2449--><p class="noindent" >Events are defined at gesture level and events management messages should be addressed to gestures.
<a 
 id="dx20-82001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2454--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gestureevents</span> <img 
src="OSCMsg91x.png" alt="PICT" >
</div></dd></dl>
                                                                                 

                                                                                 
<a 
 id="dx20-82002"></a>
<a 
 id="dx20-82003"></a>
<a 
 id="dx20-82004"></a>
<a 
 id="dx20-82005"></a>
<a 
 id="dx20-82006"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gfEnter </span>triggered when the gesture state changes from idle to active.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfLeave </span>triggered when the gesture state changes from active to idle.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfActive </span>triggered in active state each time the gesture likelihood is refreshed.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfIdle </span>triggered in idle state each time the gesture likelihood is refreshed.</li></ul>
<!--l. 2468--><p class="noindent" >A message associated to a gesture supports the following specific variables:
<a 
 id="dx20-82007"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2474--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturevariable</span> <img 
src="OSCMsg92x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx20-82008"></a>
<a 
 id="dx20-82009"></a>
<a 
 id="dx20-82010"></a>
<!--l. 2478--><p class="noindent" >These variables support the scaling feature associated to position variables and described in section <a 
href="OSCMsgch14.html#x19-7100014.2.1">14.2.1<!--tex4ht:ref: posvar --></a>
p.<a 
href="OSCMsgch14.html#x19-7100014.2.1">104<!--tex4ht:ref: posvar --></a>.
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gflikelihood </span>indicates the current likelihood
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfpos </span>indicates the current position in the gesture
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfspeed </span>indicates the current gesture execution speed</li></ul>
<!--l. 2485--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Variables described in section <a 
href="OSCMsgch14.html#x19-7000014.2">14.2<!--tex4ht:ref: interactvar --></a> p.<a 
href="OSCMsgch14.html#x19-7000014.2">104<!--tex4ht:ref: interactvar --></a> may also be used but they are meaningless and contains default
values.
<!--l. 2491--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.5    </span> <a 
 id="x20-8300015.5"></a>Gesture Follower Appearance</h3>
                                                                                 

                                                                                 
<!--l. 2493--><p class="noindent" >A gesture follower object has a graphic appearance and supports all the standard objects properties, including
mapping and synchronization. This graphic appearance is provided mainly for debug purpose and
by default, the object is hidden. Figure <a 
href="#x20-830011">15.1<!--tex4ht:ref: fig:gfgraph --></a> shows the gesture follower appearance in its different
phases:
     <ul class="itemize1">
     <li class="itemize">when idle, the upper part of the graphic indicates the buffer state of the different gestures. It also
     includes the gestures likelihood threshold.
     </li>
     <li class="itemize">when learning, a red frame and a grey background indicates that a learning a gesture is currently in
     progress. The gesture buffer state is refreshed while learning.
     </li>
     <li class="itemize">when following, the upper part indicates each gesture current likelihood and the lower part indicates
     the current estimated positions.</li></ul>
<!--l. 2501--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x20-830011"></a>
                                                                                 

                                                                                 
<!--l. 2502--><p class="noindent" ><img 
src="OSCMsg93x.png" alt="PIC" class="graphics" width="405.45045pt" height="120.19774pt" ><!--tex4ht:graphics  
name="OSCMsg93x.png" src="imgs/gesture-follower.ps"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;15.1: </span><span  
class="content">The gesture follower appearance in its different phases.</span></div><!--tex4ht:label?: x20-830011 -->
                                                                                 

                                                                                 
<!--l. 2505--><p class="noindent" ></div><hr class="endfigure">
                                                                                 

                                                                                 
<!--l. 2511--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch17.html" >next</a>] [<a 
href="OSCMsgch14.html" >prev</a>] [<a 
href="OSCMsgch14.html#tailOSCMsgch14.html" >prev-tail</a>] [<a 
href="OSCMsgch15.html" >front</a>] [<a 
href="OSCMsg3.html#OSCMsgch16.html" >up</a>] </p></div>
<!--l. 2511--><p class="noindent" ><a 
 id="tailOSCMsgch15.html"></a>  
</body></html> 
