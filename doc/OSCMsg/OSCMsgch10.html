<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>10 Mapping graphic space to time space</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,frames,index=3,info --> 
<meta name="src" content="OSCMsg.tex"> 
<meta name="date" content="2014-05-12 17:08:00"> 
<link rel="stylesheet" type="text/css" href="OSCMsg.css"> 
</head><body 
>
<!--l. 1473--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch11.html" >next</a>] [<a 
href="OSCMsgch9.html" >prev</a>] [<a 
href="OSCMsgch9.html#tailOSCMsgch9.html" >prev-tail</a>] [<a 
href="#tailOSCMsgch10.html">tail</a>] [<a 
href="OSCMsg3.html#OSCMsgch10.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;10</span><br /><a 
 id="x14-4600010"></a>Mapping graphic space to time space</h2>
<!--l. 1476--><p class="noindent" >Time to space mapping refers to the description of relationship between an object local graphic space and its time
space. A mapping consists in a set of relations between the two spaces. INScore provides specific messages to
describes mappings and to synchronize arbitrary objects i.e. to display their time relationships in the graphic
space.
<h3 class="sectionHead"><span class="titlemark">10.1    </span> <a 
 id="x14-4700010.1"></a>The &#8217;map&#8217; message</h3>
<!--l. 1483--><p class="noindent" >The <span 
class="pcrr8tn-">map </span>messages can be sent to any address with the form <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">identifier</span>. It is intended to describe
the target object relation to time and sets a relation between an object segmentation and a time segmentation. The
global form of the message is:
<a 
 id="dx14-47001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1488--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">mapMsg</span> <img 
src="OSCMsg47x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47002"></a>
<!--l. 1491--><p class="noindent" >The <span 
class="pcrr8tn-">relation </span>parameter must be sent as a single string which format is described below. It consists in a list of
associations between the object local space and its time space expressed as segments.
<a 
 id="dx14-47003"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1498--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">relation</span> <img 
src="OSCMsg48x.png" alt="PICT" >
</div></dd></dl>
<!--l. 1500--><p class="noindent" >Segments are expressed as a list of intervals. For a 1 dimension resource, a segment is a made of a single interval.
For a 2 dimensions resource, a segment is a made of 2 intervals: an interval on the <span 
class="pcrr8tn-">x</span>-axis and one on the <span 
class="pcrr8tn-">y</span>-axis for
graphic based resource, or an interval on columns and one on lines for text based resources. Intervals are
right-opened.
                                                                                 

                                                                                 
<!--l. 1502--><p class="noindent" >The different kind of relations corresponds to:
     <ul class="itemize1">
     <li class="itemize"><span 
class="ptmb8t-">[1]  </span>a  relation  between  a  2  dimensions  segmentation  expressed  in  float  values  and  a  relative
     time  segmentation.  These  segmentations  are  used  by  <span 
class="pcrr8tn-">rect, ellipse, polygon, curve, line</span>
     components.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[2] </span>a relation between a 2 dimensions segmentation expressed in integer values and a relative time
     segmentation. These segmentations are used by <span 
class="pcrr8tn-">txt, txtf, img </span>components.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[3] </span>a relation between a 1 dimension segmentation expressed in integer values and a relative time
     segmentation. These segmentations are used by the <span 
class="pcrr8tn-">graph </span>component and express a relation between
     a signal space and time.</li></ul>
<!--l. 1508--><p class="noindent" >Table <a 
href="#x14-470041">10.1<!--tex4ht:ref: maptable --></a> summarizes the specific local segmentation used by each component type.
<!--l. 1510--><p class="noindent" >The specified <span 
class="pcrr8tn-">map </span>can be named with an optional <span 
class="pcrr8tn-">mapName </span>string; this name can be further reused, during object
synchronization, to specify the mapping to use. When <span 
class="pcrr8tn-">mapName </span>is not specified, the mapping has a default <span 
class="ptmri8t-">empty</span>
<span 
class="ptmri8t-">name</span>.
<!--l. 1512--><p class="noindent" >The <span 
class="pcrr8tn-">del </span>command deletes the mapping specified with <span 
class="pcrr8tn-">mapName</span>, or the <span 
class="ptmri8t-">&#8217;empty name&#8217; </span>mapping if no map name is
specified.
<div class="table">
                                                                                 

                                                                                 
<!--l. 1515--><p class="noindent" ><a 
 id="x14-470041"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
 <div class="caption" 
><span class="id">Table&#x00A0;10.1: </span><span  
class="content">Local segmentation type for each component</span></div><!--tex4ht:label?: x14-470041 -->
<div class="center" 
>
<!--l. 1517--><p class="noindent" >
<div class="tabular"> <table id="TBL-5" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-1-1"  
class="td11">                component type</td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-2"  
class="td11">segmentation type</td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-2-1"  
class="td11">                    <span 
class="pcrr8tn-">txt, txtf</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-2"  
class="td11">int2DSegments     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-3-1"  
class="td11">                          <span 
class="pcrr8tn-">img</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-2"  
class="td11">int2DSegments     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-4-1"  
class="td11"><span 
class="pcrr8tn-">rect, ellipse, polygon, curve</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-2"  
class="td11">float2DSegments  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-5-1"  
class="td11">                        <span 
class="pcrr8tn-">graph</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-5-2"  
class="td11">int1DSegments     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-6-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-6-1"  
class="td11">                             </td></tr></table></div></div>
                                                                                 

                                                                                 
</div><hr class="endfloat" />
</div>
<a 
 id="dx14-47005"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1535--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">relativeTimeSegment</span> <img 
src="OSCMsg49x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47006"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1538--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">float2DSegment</span> <img 
src="OSCMsg50x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47007"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1541--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">int2DSegment</span> <img 
src="OSCMsg51x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47008"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1544--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">int1DSegment</span> <img 
src="OSCMsg52x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47009"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1549--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">relativeTimeInterval</span> <img 
src="OSCMsg53x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-47010"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1552--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">floatInterval</span> <img 
src="OSCMsg54x.png" alt="PICT" >
</div></dd></dl>
                                                                                 

                                                                                 
<a 
 id="dx14-47011"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1555--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">intInterval</span> <img 
src="OSCMsg55x.png" alt="PICT" >
</div></dd></dl>
<!--l. 1557--><p class="noindent" >Relative time is expressed as <span 
class="pcrr8tn-">rational </span>values where <span 
class="pcrr8tn-">1 </span>represents a whole note.
<a 
 id="dx14-47012"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1561--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">rational</span> <img 
src="OSCMsg56x.png" alt="PICT" >
</div></dd></dl>
<!--l. 1563--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Mapping an image graphic space to time:
<div class="center" 
>
<!--l. 1571--><p class="noindent" >
<div 
class="colorbox" id="colorbox46"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/myImage map </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;      "( [0, 67[ [0, 86[ ) ( [0/2, 1/2[ ) </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;       ( [67, 113[ [0, 86[ ) ( [1/2, 1/1[ ) </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;       ( [113, 153[ [0, 86[ ) ( [1/1, 3/2[ ) </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;       ( [153, 190[ [0, 86[ ) ( [3/2, 2/1[ ) </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;</span><span 
class="pcrr8tn-x-x-90">&#x00A0;       ( [190, 235[ [0, 86[ ) ( [2/1, 5/2[ )"</span></div></div>
</div>
<!--l. 1572--><p class="noindent" >the image is horizontally segmented into 5 different graphic segments that express pixel positions. The vertical
dimension of the segments remains the same and corresponds to the interval <span 
class="pcrr8tn-">[0, 86[</span>. Each graphic segment is
associated to a time interval which duration is 1/2 (a half note).
<!--l. 1574--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span> <span 
class="small-caps">A</span><span 
class="small-caps">B</span><span 
class="small-caps">O</span><span 
class="small-caps">U</span><span 
class="small-caps">T</span> <span 
class="small-caps">L</span><span 
class="small-caps">O</span><span 
class="small-caps">C</span><span 
class="small-caps">A</span><span 
class="small-caps">L</span> <span 
class="small-caps">S</span><span 
class="small-caps">P</span><span 
class="small-caps">A</span><span 
class="small-caps">C</span><span 
class="small-caps">E</span><span 
class="small-caps">S</span></span>
     <ul class="itemize1">
     <li class="itemize">Text objects (<span 
class="pcrr8tn-">txt txtf</span>) local space is expressed by intervals on columns and rows.
     </li>
     <li class="itemize">Html object (<span 
class="pcrr8tn-">html, htmlf</span>) do not support mapping because there is not correspondence between
     the text and the graphic space.
     </li>
     <li class="itemize">Vectorial objects (<span 
class="pcrr8tn-">rect, ellipse, polygon, curve, svg,...</span>) express their local graphic space
     in internal coordinates system i.e. on the [-1.,1.] interval.
     </li>
     <li class="itemize">Bitmap objects (<span 
class="pcrr8tn-">img</span>) express their local graphic space in pixels.</li></ul>
                                                                                 

                                                                                 
<h3 class="sectionHead"><span class="titlemark">10.2    </span> <a 
 id="x14-4800010.2"></a>The &#8217;map+&#8217; message</h3>
<!--l. 1587--><p class="noindent" >The <span 
class="pcrr8tn-">map+ </span>messages is similar to the <span 
class="pcrr8tn-">map </span>message but doesn&#8217;t replace the existing mapping data: the specified
relations are added to the existing one.
<a 
 id="dx14-48001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1591--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">mapAddMsg</span> <img 
src="OSCMsg57x.png" alt="PICT" >
</div> </dd></dl>
<a 
 id="dx14-48002"></a>
<!--l. 1597--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">10.3    </span> <a 
 id="x14-4900010.3"></a>Mapping files</h3>
<!--l. 1599--><p class="noindent" >The <span 
class="pcrr8tn-">mapf </span>messages is similar to the <span 
class="pcrr8tn-">map </span>message but gives the path name of a file containing the mapping data,
along with the optional map name.
<a 
 id="dx14-49001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 1602--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">mapfMsg</span> <img 
src="OSCMsg58x.png" alt="PICT" >
</div> </dd></dl>
<a 
 id="dx14-49002"></a>
<!--l. 1609--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">10.4    </span> <a 
 id="x14-5000010.4"></a>Symbolic score mappings</h3>
<!--l. 1612--><p class="noindent" >Mapping between the graphic and time space is automatically computed for symbolic score <span 
class="pcrr8tn-">gmn, gmnstream,</span>
<span 
class="pcrr8tn-">gmnf</span>. However and depending on the application, the graphic space may be segmented in different ways, for
instance: different graphic segments for different staves, a single graphic segment traversing all a system, etc. Thus
for a symbolic score, the <span 
class="pcrr8tn-">map </span>message different and is only intended to select one king mapping supported by the
system.
<a 
 id="dx14-50001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
                                                                                 

                                                                                 
<!--l. 1616--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">scoreMap</span> <img 
src="OSCMsg59x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx14-50002"></a>
<a 
 id="dx14-50003"></a>
<a 
 id="dx14-50004"></a>
<a 
 id="dx14-50005"></a>
<a 
 id="dx14-50006"></a>
<a 
 id="dx14-50007"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">page</span>: a page level mapping
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">system</span>: a system level mapping
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">systemflat</span>: a system level mapping without system subdivision (one graphic segment per system)
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">staff</span><span 
class="pcrro8t-">n</span>: a staff level mapping: the staff number is indicated by <span 
class="pcrr8tn-">n</span>, a number between 1 and the score
     staves count.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">voice</span><span 
class="pcrro8t-">n</span>: a voice level mapping: the voice number is indicated by <span 
class="pcrr8tn-">n</span>, a number between 1 and the score
     voices count.</li></ul>
<!--l. 1632--><p class="noindent" >The default mapping for a symbolic score is unnamed but equivalent to <span 
class="pcrr8tn-">staff1</span>.
<!--l. 1634--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Requesting the mapping of the third staff of a score:
<div class="center" 
>
<!--l. 1636--><p class="noindent" >
<div 
class="colorbox" id="colorbox47"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/myScore map staff3</span>
</div></div>
</div>
<!--l. 1637--><p class="noindent" >Requesting the system mapping :
<div class="center" 
>
<!--l. 1638--><p class="noindent" >
<div 
class="colorbox" id="colorbox48"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/myScore map system</span>
</div></div>
</div>
                                                                                 

                                                                                 
<!--l. 1640--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />A voice may be distributed on several staves and thus a staff may contain several voices.
                                                                                 

                                                                                 
<!--l. 1646--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch11.html" >next</a>] [<a 
href="OSCMsgch9.html" >prev</a>] [<a 
href="OSCMsgch9.html#tailOSCMsgch9.html" >prev-tail</a>] [<a 
href="OSCMsgch10.html" >front</a>] [<a 
href="OSCMsg3.html#OSCMsgch10.html" >up</a>] </p></div>
<!--l. 1646--><p class="noindent" ><a 
 id="tailOSCMsgch10.html"></a>  
</body></html> 
