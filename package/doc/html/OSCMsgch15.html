<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>15 Plugins</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,frames,index=3,info --> 
<meta name="src" content="OSCMsg.tex"> 
<meta name="date" content="2014-04-17 11:16:00"> 
<link rel="stylesheet" type="text/css" href="OSCMsg.css"> 
</head><body 
>
<!--l. 2550--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch16.html" >next</a>] [<a 
href="OSCMsgch14.html" >prev</a>] [<a 
href="OSCMsgch14.html#tailOSCMsgch14.html" >prev-tail</a>] [<a 
href="#tailOSCMsgch15.html">tail</a>] [<a 
href="OSCMsg3.html#OSCMsgch15.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;15</span><br /><a 
 id="x21-8500015"></a>Plugins</h2>
<h3 class="sectionHead"><span class="titlemark">15.1    </span> <a 
 id="x21-8600015.1"></a>FAUST plugins</h3>
<!--l. 2559--><p class="noindent" >FAUST [Functional Audio Stream]<span class="footnote-mark"><a 
href="OSCMsg22.html#fn1x190"><sup class="textsuperscript">1</sup></a></span><a 
 id="x21-86001f1"></a> 
is a functional programming language specifically designed for real-time signal processing and synthesis. A
FAUST/INScore architecture allows to embed FAUST processors in INScore, for the purpose of signals
computation. A FAUST plugin is viewed as a parallel signal and thus it is created in the <span 
class="pcrr8tn-">signal </span>address space.
Similarly to signals, it is associated to an OSC address in the form <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/signal/</span><span 
class="pcrro8t-">name </span>where <span 
class="pcrro8t-">name </span>is a
user defined name.
<a 
 id="dx21-86002"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2563--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">faustprocessor</span> <img 
src="OSCMsg92x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-86003"></a>
<!--l. 2565--><p class="noindent" >A FAUST processor is created with a <span 
class="pcrr8tn-">set </span>message followed by the <span 
class="pcrr8tn-">faust </span>type, followed by the plugin path
name.
<h4 class="subsectionHead"><span class="titlemark">15.1.1    </span> <a 
 id="x21-8700015.1.1"></a>Specific messages</h4>
<!--l. 2572--><p class="noindent" >A FAUST processor is characterized by the numbers of input and output channels and by a set of parameters. Each
parameter carries a name defined by the FAUST processor. The set of messages supported by a FAUST
processor is the set of signals messages extended with the parameters names and with specific query
messages.
<a 
 id="dx21-87001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2578--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">faustmessage</span> <img 
src="OSCMsg93x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-87002"></a>
                                                                                 

                                                                                 
<a 
 id="dx21-87003"></a>
<a 
 id="dx21-87004"></a>
<a 
 id="dx21-87005"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrro8t-">msg </span>is any of the FAUST processor parameters, which are defined by the FAUST processor.
     </li>
     <li class="itemize">the <span 
class="pcrr8tn-">get </span>message is extended to query the FAUST processor: <span 
class="pcrr8tn-">in </span>and <span 
class="pcrr8tn-">out </span>give the number of input and
     output channels.</li></ul>
<!--l. 2590--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Creating a FAUST processor and querying its input and output count:
<div class="center" 
>
<!--l. 2594--><p class="noindent" >
<div 
class="colorbox" id="colorbox87"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/myFaust set faust aFaustPlugin </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/myFaust get in out</span></div></div>
</div>
<!--l. 2595--><p class="noindent" >&#x00A0;       gives as output:
<div class="center" 
>
<!--l. 2598--><p class="noindent" >
<div 
class="colorbox" id="colorbox88"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/myFaust in 2 </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/myFaust out 4</span></div></div>
</div>
<!--l. 2599--><p class="noindent" >Modifying the value of a FAUST processor parameter named <span 
class="pcrr8tn-">volume</span>:
<div class="center" 
>
<!--l. 2600--><p class="noindent" >
<div 
class="colorbox" id="colorbox89"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/myFaust volume 0.8</span>
</div></div>
</div>
<!--l. 2602--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />The plugins are shared libraries which extension is platform dependent. The plugin name should not
include the extension. The expected extensions are the following: .dylib on MacOS and Linux, .dll on
Windows.
<!--l. 2607--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.1.2    </span> <a 
 id="x21-8800015.1.2"></a>Feeding and composing FAUST processors</h4>
<!--l. 2610--><p class="noindent" >A FAUST processor accepts float values as input, which are taken as interleaved data and distributed to the input
channels.
<!--l. 2612--><p class="noindent" >From composition viewpoint, a FAUST processor is a parallel signal which dimension is the number of
output channels. Thus, a FAUST processor can be used like any parallel signal. However, the signal
identifier defined in <a 
href="OSCMsgch12.html#x16-5900012.1.2">12.1.2<!--tex4ht:ref: parcomp --></a> is extended to support adressing single components of parallel signal as
follows:
                                                                                 

                                                                                 
<a 
 id="dx21-88001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2618--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">signal</span> <img 
src="OSCMsg94x.png" alt="PICT" >
</div></dd></dl>
<!--l. 2619--><p class="noindent" >where <span 
class="pcrr8tn-">n </span>selects the signal #n of a parallel signal. Note that indexes start at 0.
<!--l. 2621--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Creating 3 parallel signals using the 3 output channels of a FAUST processor named <span 
class="pcrr8tn-">myFaust</span>:
<div class="center" 
>
<!--l. 2626--><p class="noindent" >
<div 
class="colorbox" id="colorbox90"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/y1 set &#8217;myFaust/0&#8217; 0.01 0. 1. 1. 1. </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/y2 set &#8217;myFaust/1&#8217; 0.01 0.5 1. 1. 1. </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/signal/y3 set &#8217;myFaust/2&#8217; 0.01 -0.5 1. 1. 1.</span></div></div>
</div>
<!--l. 2631--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">15.2    </span> <a 
 id="x21-8900015.2"></a>Gesture Follower</h3>
<!--l. 2634--><p class="noindent" >INScore supports gesture following using the technology developed by the IRCAM IMTR team. These features are
available as a plugin that is included in the INScore distribution (version 1.03 or greater) or available from the
IRCAM.
<!--l. 2639--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.1    </span> <a 
 id="x21-9000015.2.1"></a>Basic principle</h4>
<!--l. 2640--><p class="noindent" >Gesture following is provided as a mean to interact with a score. From input viewpoint, the gesture follower is
similar to signals (see section <a 
href="OSCMsgch12.html#x16-5800012.1.1">12.1.1<!--tex4ht:ref: ssignal --></a> p.<a 
href="OSCMsgch12.html#x16-5800012.1.1">83<!--tex4ht:ref: ssignal --></a>): it accepts data stream as input both in learning and following modes. It
implements a specific set of events related to gesture following and can generate message streams parametrized
with the gesture follower current state.
<!--l. 2642--><p class="noindent" >A gesture follower is setup to handle a given count of gestures, which are actually denoted by streams of float
vectors. We&#8217;ll refer to the size of the float vector as the <span 
class="ptmri8t-">gesture dimension</span>. For example, the dimension of a gesture
captured from x, y and z accelerometers is 3.
<!--l. 2644--><p class="noindent" >A gesture follower operates in two distinct phases: a <span 
class="ptmri8t-">learning phase </span>where it actually stores the gestures data, and a
<span 
class="ptmri8t-">following phase </span>where it tries to match incoming data to the stored gestures data. When not learning nor following,
we&#8217;ll talk of an idle phase.
<!--l. 2646--><p class="noindent" >In the <span 
class="ptmri8t-">following phase</span>, the system maintains a list of likelihood for the learned gestures, a list of positions in the
gestures and a list of speeds representing how fast the gestures are made. Of course, the higher the
likelihood, the more these data are meaningfull. It&#8217;s the user responsability to decide on the meaningfull
likelihood threshold value. Interaction events are triggered only in the <span 
class="ptmri8t-">following phase </span>and for meaningfull
                                                                                 

                                                                                 
likelihoods.
<!--l. 2650--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.2    </span> <a 
 id="x21-9100015.2.2"></a>Messages</h4>
<!--l. 2651--><p class="noindent" >A gesture follower is created in a scene using the <span 
class="pcrr8tn-">imtrgf </span>type. It has a graphic appearance that may be used for
debug purpose but it is hidden by default.
<a 
 id="dx21-91001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2655--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturefollower</span> <img 
src="OSCMsg95x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-91002"></a>
<!--l. 2658--><p class="noindent" >The parameters are:
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gesturedimension</span>: the size of the gestures data vector.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">bufsize</span>: the size of the gesture data storage.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">name</span>: a list of names to be used to refer to the learned gestures.</li></ul>
<!--l. 2665--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span>  </span><br 
class="newline" />A gesture follower is created with a fixed count of gestures that can be learned and decoded. These gestures are
named gestures and can be addressed at <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">myfollower</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">gesturename </span>where the part in italic are
user defined names and where <span 
class="pcrr8tn-">myfollower </span>is a gesture follower.
<a 
 id="dx21-91003"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
                                                                                 

                                                                                 
<!--l. 2678--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturefollower</span> <img 
src="OSCMsg96x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-91004"></a>
<a 
 id="dx21-91005"></a>
<a 
 id="dx21-91006"></a>
<a 
 id="dx21-91007"></a>
<a 
 id="dx21-91008"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="ptmb8t-">[1] </span>input data into the gesture follower. The data are interpreted according to the current operating
     mode i.e. learning, following or idle.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[2] </span>starts to learn the gesture designated by <span 
class="ptmri8t-">name</span>. Actually records the next input data to the gesture.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[3] </span>starts following i.e. trying to match the next input data to the recorded gestures.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[4] </span>stops learning or following. Actually puts the system in idle phase.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[5] </span>clear all the gestures data. This is equivalent to send the <span 
class="pcrr8tn-">clear </span>message to all the gestures.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[6] </span>sets the size of the window that contains the history of the likelihoods. May be viewed as how fast
     the likelihoods will change.
     </li>
     <li class="itemize"><span 
class="ptmb8t-">[7] </span>sets the follower tolerance.</li></ul>
<!--l. 2695--><p class="noindent" ><span 
class="ptmbc8t-">E<span 
class="small-caps">X</span><span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">P</span><span 
class="small-caps">L</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Creating a gesture follower for 3 dimensional data and a typical learning sequence:
<div class="center" 
>
<!--l. 2701--><p class="noindent" >
<div 
class="colorbox" id="colorbox91"> <div class="minipage"><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf set imtrgf 3 1000 gestureA gestureB gestureC gestureD</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf learn gestureA </span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf 0.1 0.5 -0.2 ... 0.7; ! the data size must be a multiple of 3</span><br 
class="newline" /><span 
class="pcrr8tn-x-x-90">/ITL/scene/gf stop;</span>
                                                                                 

                                                                                 
</div></div>
</div>
<!--l. 2705--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.3    </span> <a 
 id="x21-9200015.2.3"></a>Gestures management</h4>
<!--l. 2707--><p class="noindent" >Messages can also be sent to gestures i.e. to addresses in the form <span 
class="pcrr8tn-">/ITL/</span><span 
class="pcrro8t-">scene</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">myfollower</span><span 
class="pcrr8tn-">/</span><span 
class="pcrro8t-">gesturename</span>
where <span 
class="pcrr8tn-">myfollower </span>is a gesture follower.
<!--l. 2709--><p class="noindent" >A gesture could be in two states:
     <ul class="itemize1">
     <li class="itemize">an active state: when its likelihood is greater or equal to the likelihood threshold.
     </li>
     <li class="itemize">an idle state: when its likelihood is lower than the likelihood threshold.</li></ul>
<a 
 id="dx21-92001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2720--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesture</span> <img 
src="OSCMsg97x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-92002"></a>
<a 
 id="dx21-92003"></a>
<a 
 id="dx21-92004"></a>
<a 
 id="dx21-92005"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">set</span>: sets the gesture data. This is equivalent to learn the corresponding data. The <span 
class="pcrr8tn-">set </span>message could
     be used to restored previously saved gesture data.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">clear</span>: clears the gesture data.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">learn</span>: puts the gestures follower in learning mode and starts learning the corresponding gesture.
     This is equivalent to send OSClearn <span 
class="ptmri8t-">gesturename </span>to the parent gesture follower.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">likelihoodThreshold</span>: sets the gesture likelihood threshold. The parameter is a float value in the
     range <span 
class="pcrr8tn-">[0,1]</span>. Default value is <span 
class="pcrr8tn-">0.5</span>.</li></ul>
                                                                                 

                                                                                 
<!--l. 2734--><p class="noindent" >Gestures supports also specific queries :
<a 
 id="dx21-92006"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2737--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gestureget</span> <img 
src="OSCMsg98x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-92007"></a>
<a 
 id="dx21-92008"></a>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">get</span>: without parameter, returns a set message when the gesture is not empty.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">size</span>: gives the current size of the gesture, actually the number of recorded frames.</li></ul>
<!--l. 2749--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.4    </span> <a 
 id="x21-9300015.2.4"></a>Events and interaction</h4>
<!--l. 2751--><p class="noindent" >Events are defined at gesture level and events management messages should be addressed to gestures.
<a 
 id="dx21-93001"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2756--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gestureevents</span> <img 
src="OSCMsg99x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-93002"></a>
<a 
 id="dx21-93003"></a>
<a 
 id="dx21-93004"></a>
<a 
 id="dx21-93005"></a>
<a 
 id="dx21-93006"></a>
                                                                                 

                                                                                 
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gfEnter </span>triggered when the gesture state changes from idle to active.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfLeave </span>triggered when the gesture state changes from active to idle.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfActive </span>triggered in active state each time the gesture likelihood is refreshed.
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfIdle </span>triggered in idle state each time the gesture likelihood is refreshed.</li></ul>
<!--l. 2770--><p class="noindent" >A message associated to a gesture supports the following specific variables:
<a 
 id="dx21-93007"></a>
<dl class="list1"><dt class="list">
</dt><dd 
class="list">
<!--l. 2776--><p class="noindent" ><div class="minipage"><span 
class="ptmri8t-">gesturevariable</span> <img 
src="OSCMsg100x.png" alt="PICT" >
</div></dd></dl>
<a 
 id="dx21-93008"></a>
<a 
 id="dx21-93009"></a>
<a 
 id="dx21-93010"></a>
<!--l. 2780--><p class="noindent" >These variables support the scaling feature associated to position variables and described in section <a 
href="OSCMsgch13.html#x17-7000013.2.1">13.2.1<!--tex4ht:ref: posvar --></a>
p.<a 
href="OSCMsgch13.html#x17-7000013.2.1">104<!--tex4ht:ref: posvar --></a>.
     <ul class="itemize1">
     <li class="itemize"><span 
class="pcrr8tn-">gflikelihood </span>indicates the current likelihood
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfpos </span>indicates the current position in the gesture
     </li>
     <li class="itemize"><span 
class="pcrr8tn-">gfspeed </span>indicates the current gesture execution speed</li></ul>
<!--l. 2787--><p class="noindent" ><span 
class="ptmbc8t-">N<span 
class="small-caps">O</span><span 
class="small-caps">T</span><span 
class="small-caps">E</span> </span><br 
class="newline" />Variables described in section <a 
href="OSCMsgch13.html#x17-6900013.2">13.2<!--tex4ht:ref: interactvar --></a> p.<a 
href="OSCMsgch13.html#x17-6900013.2">104<!--tex4ht:ref: interactvar --></a> may also be used but they are meaningless and contains default
values.
<!--l. 2793--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.5    </span> <a 
 id="x21-9400015.2.5"></a>Gesture Follower Appearance</h4>
<!--l. 2795--><p class="noindent" >A gesture follower object has a graphic appearance and supports all the standard objects properties, including
mapping and synchronization. This graphic appearance is provided mainly for debug purpose and
by default, the object is hidden. Figure <a 
href="#x21-940011">15.1<!--tex4ht:ref: fig:gfgraph --></a> shows the gesture follower appearance in its different
phases:
     <ul class="itemize1">
     <li class="itemize">when idle, the upper part of the graphic indicates the buffer state of the different gestures. It also
     includes the gestures likelihood threshold.
                                                                                 

                                                                                 
     </li>
     <li class="itemize">when learning, a red frame and a grey background indicates that a learning a gesture is currently in
     progress. The gesture buffer state is refreshed while learning.
     </li>
     <li class="itemize">when following, the upper part indicates each gesture current likelihood and the lower part indicates
     the current estimated positions.</li></ul>
<!--l. 2803--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x21-940011"></a>
                                                                                 

                                                                                 
<!--l. 2804--><p class="noindent" ><img 
src="OSCMsg101x.png" alt="PIC" class="graphics" width="405.45045pt" height="120.19774pt" ><!--tex4ht:graphics  
name="OSCMsg101x.png" src="imgs/gesture-follower.ps"  
-->
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;15.1: </span><span  
class="content">The gesture follower appearance in its different phases.</span></div><!--tex4ht:label?: x21-940011 -->
                                                                                 

                                                                                 
<!--l. 2807--><p class="noindent" ></div><hr class="endfigure">
                                                                                 

                                                                                 
<!--l. 2814--><div class="crosslinks"><p class="noindent">[<a 
href="OSCMsgch16.html" >next</a>] [<a 
href="OSCMsgch14.html" >prev</a>] [<a 
href="OSCMsgch14.html#tailOSCMsgch14.html" >prev-tail</a>] [<a 
href="OSCMsgch15.html" >front</a>] [<a 
href="OSCMsg3.html#OSCMsgch15.html" >up</a>] </p></div>
<!--l. 2814--><p class="noindent" ><a 
 id="tailOSCMsgch15.html"></a>  
</body></html> 
